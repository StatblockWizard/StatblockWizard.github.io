// Copyright 2023 StatblockWizard
window.addEventListener('load', main, false);

function main() {
    addModules();
    addSamples();
}

function addModules() {
    let e = document.getElementById('StatblockWizardModules');
    if (e) {
        addClassnames(e, 'center');

        addModuleViewer(e);
        addModuleCreator(e);

        addLicenseLink(e);
        addClearLastSaved(e);
    }
}

function addModuleCreator(e) {
    addMainPageLink(e, 'Create or edit a Statblock', 'c', 'html/StatblockWizardCreator.html', 'Open the Creator to work on a Statblock.', 'creator');
}

function addModuleViewer(e) {
    addMainPageLink(e, 'View an existing Statblock', 'v', 'html/StatblockWizardViewer.html', 'Open the Viewer to see an existing Statblock.', 'viewer');
}

function addLicenseLink(e) {
    addMainPageLink(e, 'Legal information', 'l', 'html/StatblockWizardLegal.html', 'Shows copyright information.');
}

function addMainPageLink(e, text, accessKey, link, alt, className) {
    let newMainPageLink = INPUTbutton(text,accessKey, alt,className);
    addClassnames(newMainPageLink,'mainpagelink');
    e.appendChild(newMainPageLink);
    newMainPageLink.addEventListener('click', () => {
        window.location.replace(link);
    });
}

function addClearLastSaved(e) {
    let t = 'Clear Saved Statblock';
    let tx = "Remove all data that was stored by this app from your browser's storage. This will enable the Demo Statblock in the Viewer.";
    let newMainPageLink = INPUTbutton(t,'', tx,'mainpagelink');
    e.appendChild(newMainPageLink);
    newMainPageLink.addEventListener('click', () => {
        DBclearStatblockWizard();
        alert('Cleared! If you close StatblockWizard now, no stored data from this App will remain.');
    });
}

function addSamples() {
    let d = document.getElementById('StatblockWizardSamples');
    addClassnames(d, 'center');

    let classnames = 'samplefigure';
    // let imgclassnames = 'sampleimage';
    let captionclassnames = 'samplecaption';
    let f1 = FIGURE('res/Archmage.svg', 'Archmage', 'StatblockWizard sample statblock of an Archmage', classnames, 'sampleimage', captionclassnames);
    f1.addEventListener('click', () => {
        DBsetStatblockWizard(sampleArchmage());
        window.location.replace('./html/StatblockWizardViewer.html');
    });
    let f2 = FIGURE('res/Bat.svg', 'Bat', 'StatblockWizard sample statblock of a Bat', classnames, 'sampleimage', captionclassnames);
    f2.addEventListener('click', () => {
        DBsetStatblockWizard(sampleBat());
        window.location.replace('./html/StatblockWizardViewer.html');
    });
    let f3 = FIGURE('res/Cult Fanatic.svg', 'Cult Fanatic', 'StatblockWizard sample statblock of a Cult Fanatic', classnames, 'sampleimage', captionclassnames);
    f3.addEventListener('click', () => {
        DBsetStatblockWizard(sampleCultFanatic());
        window.location.replace('./html/StatblockWizardViewer.html');
    });
    d.appendChild(f1);
    d.appendChild(f2);
    d.appendChild(f3);
}

function sampleArchmage() {
    return JSON.parse(`[{"type":"section","caption":"General","showcaption":false,"css":"section general","captioncss":""},{"type":"string","caption":"Name","showcaption":false,"defaultvalue":"","css":"title","captioncss":"","value":"Archmage"},{"type":"string","caption":"Size / Type / Alignment","showcaption":false,"defaultvalue":"","css":"sizetypealignment","captioncss":"","value":"Medium humanoid (any race), any alignment"},{"type":"string","caption":"Armor Class","showcaption":true,"defaultvalue":"","css":"feature armorclass","captioncss":"keyword","value":"12 (15 with mage armor)"},{"type":"string","caption":"Hit Points","showcaption":true,"defaultvalue":"","css":"feature hitpoints","captioncss":"keyword","value":"99 (18d8 + 18)"},{"type":"string","caption":"Speed","showcaption":true,"defaultvalue":"30 ft.","css":"feature speed","captioncss":"keyword","value":"30 ft."},{"type":"sectionend","content":"static","values":[]},{"type":"section","caption":"Abilities","showcaption":false,"css":"section abilities","captioncss":""},{"type":"ability5e","caption":"STR","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"10"},{"type":"ability5e","caption":"DEX","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"14"},{"type":"ability5e","caption":"CON","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"12"},{"type":"ability5e","caption":"INT","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"20"},{"type":"ability5e","caption":"WIS","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"15"},{"type":"ability5e","caption":"CHA","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"16"},{"type":"sectionend","content":"static","values":[]},{"type":"section","caption":"Features","showcaption":false,"css":"section features","captioncss":""},{"type":"string","caption":"Saving Throws","showcaption":true,"defaultvalue":"","css":"feature savingthrows","captioncss":"keyword","value":"Int +9, Wis +6"},{"type":"skills5e","caption":"Skills","showcaption":true,"defaultvalue":"","css":"feature skills","captioncss":"keyword","skillcss":"skill","value":"Arcana +13, History +13"},{"type":"string","caption":"Damage Vulnerabilities","showcaption":true,"defaultvalue":"","css":"feature vulnerabilities","captioncss":"keyword","value":""},{"type":"string","caption":"Damage Resistances","showcaption":true,"defaultvalue":"","css":"feature resistances","captioncss":"keyword","value":"damage from spells; nonmagical bludgeoning, piercing, and slashing (from stoneskin)"},{"type":"string","caption":"Damage Immunities","showcaption":true,"defaultvalue":"","css":"feature immunities","captioncss":"keyword","value":""},{"type":"string","caption":"Condition Immunities","showcaption":true,"defaultvalue":"","css":"feature immunities","captioncss":"keyword","value":""},{"type":"senses5e","caption":"Senses","showcaption":true,"defaultvalue":"","css":"feature senses","captioncss":"keyword","value":"passive Perception 12"},{"type":"languages5e","caption":"Languages","showcaption":true,"defaultvalue":"","css":"feature languages","captioncss":"keyword","value":"any six languages"},{"type":"cr5e","caption":"Challenge","proficiencycaption":"Proficiency Bonus","css":"feature crproficiency","crcss":"cr","captioncss":"keyword","proficiencycss":"proficiency","proficiencycaptioncss":"keyword","value":"16"},{"type":"sectionend","content":"static","values":[]},{"type":"section","caption":"Characteristics (like Personality Traits, Ideals, Bonds, Flaws) ","showcaption":false,"css":"section characteristics","captioncss":""},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Special Traits","showcaption":false,"css":"section specialtraits","captioncss":""},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[{"type":"namedstring","caption":"Magic Resistance.","value":"The archmage has advantage on saving throws against spells and other magical effects."},{"type":"namedstring","caption":"Spellcasting.","value":"The archmage is an 18th-Â­level spellcaster. Its spellcasting ability is Intelligence (spell save DC 17, +9 to hit with spell attacks). The archmage can cast disguise self and invisibility at will and has the following wizard spells prepared:"},{"type":"list","listtype":"spells5e","values":[{"dt":"Cantrips (at will):","dd":"fire bolt, light, mage hand, prestidigitation, shocking grasp"},{"dt":"1st level (4 slots):","dd":"detect magic, identify, mage armor*, magic missile"},{"dt":"2nd level (3 slots):","dd":"detect thoughts, mirror image, misty step"},{"dt":"3rd level (3 slots):","dd":"counterspell, fly, lightning bolt"},{"dt":"4th level (3 slots):","dd":"banishment, fire shield, stoneskin*"},{"dt":"5th level (3 slots):","dd":"cone of cold, scrying, wall of force"},{"dt":"6th level (1 slot):","dd":"globe of invulnerability"},{"dt":"7th level (1 slot):","dd":"teleport"},{"dt":"8th level (1 slot):","dd":"mind blank*"},{"dt":"9th level (1 slot):","dd":"time stop"}]},{"type":"namedstring","caption":"*","value":"The archmage casts these spells on itself before combat."}]},{"type":"section","caption":"Actions","showcaption":true,"css":"section actions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[{"type":"attack5e","caption":"Dagger.","attacktype":"2","attack":"+6 to hit, reach 5 ft. or range 20/60 ft., one target.","hit":"4 (1d4 + 2) piercing damage."}]},{"type":"section","caption":"Bonus Actions","showcaption":true,"css":"section bonusactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Reactions","showcaption":true,"css":"section reactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Legendary Actions","showcaption":true,"css":"section legendaryactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Epic Actions","showcaption":true,"css":"section epicactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Lair Actions","showcaption":true,"css":"section lairactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Supplemental","showcaption":false,"css":"section supplemental","captioncss":""},{"type":"image","caption":"Image","showcaption":false,"css":"image","value":""},{"type":"sectionend","content":"static","values":[]},{"type":"css","fortype":"namedstring","css":"line namedstring","captioncss":"keyword"},{"type":"css","fortype":"text","css":"line text"},{"type":"css","fortype":"attack5e","css":"line weapon","captioncss":"keyword","attackcss":"attack","hitcss":"hit"},{"type":"css","fortype":"list","forsubtype":"ul","listcss":"line list-ul","css":"listitem","captioncss":"keyword"},{"type":"css","fortype":"list","forsubtype":"ol","listcss":"line list-ol","css":"listitem","captioncss":"keyword"},{"type":"css","fortype":"list","forsubtype":"dl","listcss":"line list-dl","css":"listitem","captioncss":"keyword"},{"type":"css","fortype":"list","forsubtype":"spells5e","listcss":"line list-spells5e","captioncss":"spellliststart","css":"spelllist","spellcss":"spell"}]`);
}

function sampleBat() {
    return JSON.parse(`[{"type":"section","caption":"General","showcaption":false,"css":"section general","captioncss":""},{"type":"string","caption":"Name","showcaption":false,"defaultvalue":"","css":"title","captioncss":"","value":"Bat"},{"type":"string","caption":"Size / Type / Alignment","showcaption":false,"defaultvalue":"","css":"sizetypealignment","captioncss":"","value":"Tiny beast, unaligned"},{"type":"string","caption":"Armor Class","showcaption":true,"defaultvalue":"","css":"feature armorclass","captioncss":"keyword","value":"12"},{"type":"string","caption":"Hit Points","showcaption":true,"defaultvalue":"","css":"feature hitpoints","captioncss":"keyword","value":"1 (1d4 - 1)"},{"type":"string","caption":"Speed","showcaption":true,"defaultvalue":"30 ft.","css":"feature speed","captioncss":"keyword","value":"5 ft., fly 30 ft."},{"type":"sectionend","content":"static","values":[]},{"type":"section","caption":"Abilities","showcaption":false,"css":"section abilities","captioncss":""},{"type":"ability5e","caption":"STR","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"2"},{"type":"ability5e","caption":"DEX","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"15"},{"type":"ability5e","caption":"CON","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"8"},{"type":"ability5e","caption":"INT","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"2"},{"type":"ability5e","caption":"WIS","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"12"},{"type":"ability5e","caption":"CHA","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"4"},{"type":"sectionend","content":"static","values":[]},{"type":"section","caption":"Features","showcaption":false,"css":"section features","captioncss":""},{"type":"string","caption":"Saving Throws","showcaption":true,"defaultvalue":"","css":"feature savingthrows","captioncss":"keyword","value":""},{"type":"skills5e","caption":"Skills","showcaption":true,"defaultvalue":"","css":"feature skills","captioncss":"keyword","skillcss":"skill","value":""},{"type":"string","caption":"Damage Vulnerabilities","showcaption":true,"defaultvalue":"","css":"feature vulnerabilities","captioncss":"keyword","value":""},{"type":"string","caption":"Damage Resistances","showcaption":true,"defaultvalue":"","css":"feature resistances","captioncss":"keyword","value":""},{"type":"string","caption":"Damage Immunities","showcaption":true,"defaultvalue":"","css":"feature immunities","captioncss":"keyword","value":""},{"type":"string","caption":"Condition Immunities","showcaption":true,"defaultvalue":"","css":"feature immunities","captioncss":"keyword","value":""},{"type":"senses5e","caption":"Senses","showcaption":true,"defaultvalue":"","css":"feature senses","captioncss":"keyword","value":"blindsight 60 ft., passive Perception 11"},{"type":"languages5e","caption":"Languages","showcaption":true,"defaultvalue":"","css":"feature languages","captioncss":"keyword","value":"â"},{"type":"cr5e","caption":"Challenge","proficiencycaption":"Proficiency Bonus","css":"feature crproficiency","crcss":"cr","captioncss":"keyword","proficiencycss":"proficiency","proficiencycaptioncss":"keyword","value":"1"},{"type":"sectionend","content":"static","values":[]},{"type":"section","caption":"Characteristics (like Personality Traits, Ideals, Bonds, Flaws) ","showcaption":false,"css":"section characteristics","captioncss":""},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Special Traits","showcaption":false,"css":"section specialtraits","captioncss":""},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[{"type":"namedstring","caption":"Echolocation.","value":"The bat can't use its blindsight while deafened."},{"type":"namedstring","caption":"Keen Hearing.","value":"The bat has advantage on Wisdom (Perception) checks that rely on hearing."}]},{"type":"section","caption":"Actions","showcaption":true,"css":"section actions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[{"type":"attack5e","caption":"Bite.","attacktype":"0","attack":"+0 to hit, reach 5 ft., one creature.","hit":"1 piercing damage."}]},{"type":"section","caption":"Bonus Actions","showcaption":true,"css":"section bonusactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Reactions","showcaption":true,"css":"section reactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Legendary Actions","showcaption":true,"css":"section legendaryactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Epic Actions","showcaption":true,"css":"section epicactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Lair Actions","showcaption":true,"css":"section lairactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Supplemental","showcaption":false,"css":"section supplemental","captioncss":""},{"type":"image","caption":"Image","showcaption":false,"css":"image","value":""},{"type":"sectionend","content":"static","values":[]},{"type":"css","fortype":"namedstring","css":"line namedstring","captioncss":"keyword"},{"type":"css","fortype":"text","css":"line text"},{"type":"css","fortype":"attack5e","css":"line weapon","captioncss":"keyword","attackcss":"attack","hitcss":"hit"},{"type":"css","fortype":"list","forsubtype":"ul","listcss":"line list-ul","css":"listitem","captioncss":"keyword"},{"type":"css","fortype":"list","forsubtype":"ol","listcss":"line list-ol","css":"listitem","captioncss":"keyword"},{"type":"css","fortype":"list","forsubtype":"dl","listcss":"line list-dl","css":"listitem","captioncss":"keyword"},{"type":"css","fortype":"list","forsubtype":"spells5e","listcss":"line list-spells5e","captioncss":"spellliststart","css":"spelllist","spellcss":"spell"}]`);
}

function sampleCultFanatic() {
    return JSON.parse(`[{"type":"section","caption":"General","showcaption":false,"css":"section general","captioncss":""},{"type":"string","caption":"Name","showcaption":false,"defaultvalue":"","css":"title","captioncss":"","value":"Cult Fanatic"},{"type":"string","caption":"Size / Type / Alignment","showcaption":false,"defaultvalue":"","css":"sizetypealignment","captioncss":"","value":"Medium humanoid (any race), any non-Â­good alignment"},{"type":"string","caption":"Armor Class","showcaption":true,"defaultvalue":"","css":"feature armorclass","captioncss":"keyword","value":"13 (leather armor)"},{"type":"string","caption":"Hit Points","showcaption":true,"defaultvalue":"","css":"feature hitpoints","captioncss":"keyword","value":"33 (6d8 + 6)"},{"type":"string","caption":"Speed","showcaption":true,"defaultvalue":"30 ft.","css":"feature speed","captioncss":"keyword","value":"30 ft."},{"type":"sectionend","content":"static","values":[]},{"type":"section","caption":"Abilities","showcaption":false,"css":"section abilities","captioncss":""},{"type":"ability5e","caption":"STR","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"11"},{"type":"ability5e","caption":"DEX","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"14"},{"type":"ability5e","caption":"CON","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"12"},{"type":"ability5e","caption":"INT","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"10"},{"type":"ability5e","caption":"WIS","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"13"},{"type":"ability5e","caption":"CHA","css":"ability","captioncss":"abilityname","numberscss":"abilitynumbers","scorecss":"abilityscore","modifiercss":"abilitymodifier","value":"14"},{"type":"sectionend","content":"static","values":[]},{"type":"section","caption":"Features","showcaption":false,"css":"section features","captioncss":""},{"type":"string","caption":"Saving Throws","showcaption":true,"defaultvalue":"","css":"feature savingthrows","captioncss":"keyword","value":""},{"type":"skills5e","caption":"Skills","showcaption":true,"defaultvalue":"","css":"feature skills","captioncss":"keyword","skillcss":"skill","value":"Deception+4,Persuasion+4,Religion+2"},{"type":"string","caption":"Damage Vulnerabilities","showcaption":true,"defaultvalue":"","css":"feature vulnerabilities","captioncss":"keyword","value":""},{"type":"string","caption":"Damage Resistances","showcaption":true,"defaultvalue":"","css":"feature resistances","captioncss":"keyword","value":""},{"type":"string","caption":"Damage Immunities","showcaption":true,"defaultvalue":"","css":"feature immunities","captioncss":"keyword","value":""},{"type":"string","caption":"Condition Immunities","showcaption":true,"defaultvalue":"","css":"feature immunities","captioncss":"keyword","value":""},{"type":"senses5e","caption":"Senses","showcaption":true,"defaultvalue":"","css":"feature senses","captioncss":"keyword","value":"passive Perception 11"},{"type":"languages5e","caption":"Languages","showcaption":true,"defaultvalue":"","css":"feature languages","captioncss":"keyword","value":"any one language (usually Common)"},{"type":"cr5e","caption":"Challenge","proficiencycaption":"Proficiency Bonus","css":"feature crproficiency","crcss":"cr","captioncss":"keyword","proficiencycss":"proficiency","proficiencycaptioncss":"keyword","value":"6"},{"type":"sectionend","content":"static","values":[]},{"type":"section","caption":"Characteristics (like Personality Traits, Ideals, Bonds, Flaws) ","showcaption":false,"css":"section characteristics","captioncss":""},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Special Traits","showcaption":false,"css":"section specialtraits","captioncss":""},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[{"type":"namedstring","caption":"Dark Devotion.","value":"The fanatic has advantage on saving throws against being charmed or frightened."},{"type":"namedstring","caption":"Spellcasting.","value":"The fanatic is a 4th-Â­level spellcaster. Its spellcasting ability is Wisdom (spell save DC 11, +3 to hit with spell attacks). The fanatic has the following cleric spells prepared:"},{"type":"list","listtype":"spells5e","values":[{"dt":"Cantrips (at will):","dd":"light, sacred flame, thaumaturgy"},{"dt":"1st level (4 slots):","dd":"command, inflict wounds, shield of faith"},{"dt":"2nd level (3 slots):","dd":"hold person, spiritual weapon"}]}]},{"type":"section","caption":"Actions","showcaption":true,"css":"section actions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[{"type":"namedstring","caption":"Multiattack.","value":"The fanatic makes two melee attacks."},{"type":"attack5e","caption":"Dagger.","attacktype":"2","attack":"+4 to hit, reach 5 ft. or range 20/60 ft., one creature.","hit":"4 (1d4 + 2) piercing damage."}]},{"type":"section","caption":"Bonus Actions","showcaption":true,"css":"section bonusactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Reactions","showcaption":true,"css":"section reactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Legendary Actions","showcaption":true,"css":"section legendaryactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Epic Actions","showcaption":true,"css":"section epicactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Lair Actions","showcaption":true,"css":"section lairactions","captioncss":"sectionheader"},{"type":"sectionend","content":"dynamic","contenttypes":[{"name":"feature","type":"namedstring"},{"name":"attack","type":"attack5e"},{"name":"plain text","type":"text"},{"name":"list","type":"list"}],"values":[]},{"type":"section","caption":"Supplemental","showcaption":false,"css":"section supplemental","captioncss":""},{"type":"image","caption":"Image","showcaption":false,"css":"image","value":""},{"type":"sectionend","content":"static","values":[]},{"type":"css","fortype":"namedstring","css":"line namedstring","captioncss":"keyword"},{"type":"css","fortype":"text","css":"line text"},{"type":"css","fortype":"attack5e","css":"line weapon","captioncss":"keyword","attackcss":"attack","hitcss":"hit"},{"type":"css","fortype":"list","forsubtype":"ul","listcss":"line list-ul","css":"listitem","captioncss":"keyword"},{"type":"css","fortype":"list","forsubtype":"ol","listcss":"line list-ol","css":"listitem","captioncss":"keyword"},{"type":"css","fortype":"list","forsubtype":"dl","listcss":"line list-dl","css":"listitem","captioncss":"keyword"},{"type":"css","fortype":"list","forsubtype":"spells5e","listcss":"line list-spells5e","captioncss":"spellliststart","css":"spelllist","spellcss":"spell"}]`);
}